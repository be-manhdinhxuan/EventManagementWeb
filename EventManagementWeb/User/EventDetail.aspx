<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="EventDetail.aspx.cs" Inherits="EventManagementWeb.User.EventDetail" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Chi tiết sự kiện</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../Assets/css/style.css" rel="stylesheet" />
    <link href="../Assets/css/common-layout.css" rel="stylesheet" />
    <link href="../Assets/css/pages/event-detail.css" rel="stylesheet" />
</head>
<body>
    <form id="form1" runat="server">
        <!-- Modal Event Overlay (cho Đăng ký / Hủy đăng ký) -->
        <div class="modal-overlay event-modal" id="eventModalOverlay" onclick="closeEventModalOnOverlay(event)" style="display: none;">
            <div class="modal-overlay__content">
                <div class="modal-overlay__icon-wrapper" id="eventModalIcon">
                    <!-- Icon sẽ thay đổi bằng JS: đăng ký (check) hoặc hủy (warning) -->
                    <svg class="modal-overlay__icon" width="33" height="29" viewBox="0 0 33 29" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M0 28.5L16.5 0L33 28.5H0ZM16.5 24C16.925 24 17.2815 23.856 17.5695 23.568C17.8575 23.28 18.001 22.924 18 22.5C17.999 22.076 17.855 21.72 17.568 21.432C17.281 21.144 16.925 21 16.5 21C16.075 21 15.719 21.144 15.432 21.432C15.145 21.72 15.001 22.076 15 22.5C14.999 22.924 15.143 23.2805 15.432 23.5695C15.721 23.8585 16.077 24.002 16.5 24ZM15 19.5H18V12H15V19.5Z" fill="#EC1313" />
                    </svg>
                </div>
                <h2 class="modal-overlay__title" id="eventModalTitle">Xác nhận hành động</h2>
                <p class="modal-overlay__description" id="eventModalDesc">
                    Bạn có chắc chắn muốn thực hiện hành động này không?
                </p>
                <div class="modal-overlay__form-group" id="cancelReasonGroup" style="display: none;">
                    <label for="cancelReason" class="modal-overlay__label">
                        Lý do hủy (tùy chọn)
                    </label>
                    <textarea id="cancelReason" class="modal-overlay__textarea" placeholder="Hãy cho chúng tôi biết lý do bạn hủy..." rows="4"></textarea>
                </div>
                <div class="modal-overlay__form-group" id="registerNoteGroup" style="display: none;">
                    <label for="registerNote" class="modal-overlay__label">
                        Ghi chú đăng ký (tùy chọn)
                    </label>
                    <textarea id="registerNote" class="modal-overlay__textarea" placeholder="Ví dụ: Tôi sẽ mang theo laptop..." rows="4"></textarea>
                </div>
                <div class="modal-overlay__button-group">
                    <button type="button" class="modal-overlay__button modal-overlay__button--cancel" onclick="closeEventModal()">
                        Hủy bỏ
                    </button>
                    <button type="button" class="modal-overlay__button modal-overlay__button--confirm" id="eventModalConfirmBtn" onclick="confirmEventAction()">
                        Xác nhận
                    </button>
                </div>
            </div>
        </div>

        <div class="parent">
            <!-- Sidebar -->
            <aside class="sidebar">
                <ul class="sidebar__nav">
                    <li class="sidebar__item">
                        <a href="Home.aspx" class="sidebar__link">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 32 32"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8.00016 25.3333H12.0002V18.6667C12.0002 18.2889 12.1282 17.9724 12.3842 17.7173C12.6402 17.4622 12.9566 17.3342 13.3335 17.3333H18.6668C19.0446 17.3333 19.3615 17.4613 19.6175 17.7173C19.8735 17.9733 20.001 18.2898 20.0002 18.6667V25.3333H24.0002V13.3333L16.0002 7.33333L8.00016 13.3333V25.3333ZM5.3335 25.3333V13.3333C5.3335 12.9111 5.42816 12.5111 5.6175 12.1333C5.80683 11.7556 6.06772 11.4444 6.40016 11.2L14.4002 5.2C14.8668 4.84444 15.4002 4.66666 16.0002 4.66666C16.6002 4.66666 17.1335 4.84444 17.6002 5.2L25.6002 11.2C25.9335 11.4444 26.1948 11.7556 26.3842 12.1333C26.5735 12.5111 26.6677 12.9111 26.6668 13.3333V25.3333C26.6668 26.0667 26.4055 26.6947 25.8828 27.2173C25.3602 27.74 24.7326 28.0009 24.0002 28H18.6668C18.289 28 17.9726 27.872 17.7175 27.616C17.4624 27.36 17.3344 27.0435 17.3335 26.6667V20H14.6668V26.6667C14.6668 27.0444 14.5388 27.3613 14.2828 27.6173C14.0268 27.8733 13.7104 28.0009 13.3335 28H8.00016C7.26683 28 6.63927 27.7391 6.1175 27.2173C5.59572 26.6955 5.33438 26.0675 5.3335 25.3333Z"
                                    fill="currentColor" />
                            </svg>
                            <span>Trang chủ</span>
                        </a>
                    </li>

                    <li class="sidebar__item">
                        <a href="Event.aspx" class="sidebar__link ">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 32 32"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M19.3333 24C18.4 24 17.6111 23.6778 16.9667 23.0333C16.3222 22.3889 16 21.6 16 20.6667C16 19.7333 16.3222 18.9444 16.9667 18.3C17.6111 17.6556 18.4 17.3333 19.3333 17.3333C20.2667 17.3333 21.0556 17.6556 21.7 18.3C22.3444 18.9444 22.6667 19.7333 22.6667 20.6667C22.6667 21.6 22.3444 22.3889 21.7 23.0333C21.0556 23.6778 20.2667 24 19.3333 24ZM6.66667 29.3333C5.93333 29.3333 5.30578 29.0725 4.784 28.5507C4.26222 28.0289 4.00089 27.4009 4 26.6667V8C4 7.26667 4.26133 6.63911 4.784 6.11734C5.30667 5.59556 5.93422 5.33422 6.66667 5.33334H8V4C8 3.62222 8.128 3.30578 8.384 3.05067C8.64 2.79556 8.95644 2.66756 9.33333 2.66667C9.71022 2.66578 10.0271 2.79378 10.284 3.05067C10.5409 3.30756 10.6684 3.624 10.6667 4V5.33334H21.3333V4C21.3333 3.62222 21.4613 3.30578 21.7173 3.05067C21.9733 2.79556 22.2898 2.66756 22.6667 2.66667C23.0436 2.66578 23.3604 2.79378 23.6173 3.05067C23.8742 3.30756 24.0018 3.624 24 4V5.33334H25.3333C26.0667 5.33334 26.6947 5.59467 27.2173 6.11734C27.74 6.64 28.0009 7.26756 28 8V26.6667C28 27.4 27.7391 28.028 27.2173 28.5507C26.6956 29.0733 26.0676 29.3342 25.3333 29.3333H6.66667ZM6.66667 26.6667H25.3333V13.3333H6.66667V26.6667ZM6.66667 10.6667H25.3333V8H6.66667V10.6667Z"
                                    fill="currentColor" />
                            </svg>
                            <span>Sự kiện</span>
                        </a>
                    </li>

                    <li class="sidebar__item">
                        <a href="MyEvent.aspx" class="sidebar__link ">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 32 32"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M14.6 24.4667L9.86667 19.7333L11.8 17.8L14.6 20.6L20.2 15L22.1333 16.9333L14.6 24.4667ZM6.66667 29.3333C5.93333 29.3333 5.30578 29.0724 4.784 28.5507C4.26222 28.0289 4.00089 27.4009 4 26.6667V8C4 7.26666 4.26133 6.63911 4.784 6.11733C5.30667 5.59555 5.93422 5.33422 6.66667 5.33333H8V2.66666H10.6667V5.33333H21.3333V2.66666H24V5.33333H25.3333C26.0667 5.33333 26.6947 5.59466 27.2173 6.11733C27.74 6.64 28.0009 7.26755 28 8V26.6667C28 27.4 27.7391 28.028 27.2173 28.5507C26.6956 29.0733 26.0676 29.3342 25.3333 29.3333H6.66667ZM6.66667 26.6667H25.3333V13.3333H6.66667V26.6667ZM6.66667 10.6667H25.3333V8H6.66667V10.6667Z"
                                    fill="currentColor" />
                            </svg>
                            <span>Sự kiện của tôi</span>
                        </a>
                    </li>

                    <li class="sidebar__item">
                        <a href="Notification.aspx" class="sidebar__link">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 32 32"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    d="M6.66674 12C6.66674 9.52464 7.65007 7.15067 9.40041 5.40033C11.1507 3.64999 13.5247 2.66666 16.0001 2.66666C18.4754 2.66666 20.8494 3.64999 22.5997 5.40033C24.3501 7.15067 25.3334 9.52464 25.3334 12V17.0187L27.7627 21.8773C27.8746 22.101 27.9274 22.3495 27.9161 22.5992C27.9049 22.849 27.83 23.0918 27.6985 23.3044C27.5671 23.5171 27.3834 23.6927 27.165 23.8144C26.9467 23.9361 26.7008 24 26.4507 24H21.1654C20.8688 25.1443 20.2006 26.1578 19.2658 26.8812C18.3309 27.6047 17.1822 27.9972 16.0001 27.9972C14.8179 27.9972 13.6693 27.6047 12.7344 26.8812C11.7995 26.1578 11.1313 25.1443 10.8347 24H5.5494C5.29937 24 5.05349 23.9361 4.83509 23.8144C4.6167 23.6927 4.43305 23.5171 4.3016 23.3044C4.17014 23.0918 4.09524 22.849 4.084 22.5992C4.07277 22.3495 4.12557 22.101 4.2374 21.8773L6.66674 17.0187V12ZM13.6907 24C13.9248 24.4053 14.2614 24.742 14.6668 24.976C15.0722 25.21 15.532 25.3332 16.0001 25.3332C16.4681 25.3332 16.928 25.21 17.3333 24.976C17.7387 24.742 18.0753 24.4053 18.3094 24H13.6907ZM16.0001 5.33333C14.232 5.33333 12.5363 6.03571 11.286 7.28595C10.0358 8.53619 9.3334 10.2319 9.3334 12V17.0187C9.33337 17.4324 9.23706 17.8405 9.05207 18.2107L7.49207 21.3333H24.5094L22.9494 18.2107C22.764 17.8406 22.6672 17.4325 22.6667 17.0187V12C22.6667 10.2319 21.9644 8.53619 20.7141 7.28595C19.4639 6.03571 17.7682 5.33333 16.0001 5.33333Z"
                                    fill="currentColor" />
                            </svg>
                            <span>Thông báo</span>
                        </a>
                    </li>

                    <li class="sidebar__item">
                        <a href="Setting.aspx" class="sidebar__link">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 32 32"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M26.5335 16.88C26.3198 16.6367 26.2019 16.3239 26.2019 16C26.2019 15.6761 26.3198 15.3633 26.5335 15.12L28.2402 13.2C28.4282 12.9902 28.545 12.7263 28.5738 12.446C28.6025 12.1658 28.5417 11.8836 28.4002 11.64L25.7335 7.02667C25.5934 6.78336 25.38 6.5905 25.1239 6.47558C24.8677 6.36066 24.5818 6.32955 24.3069 6.38667L21.8002 6.89334C21.4812 6.95924 21.1492 6.90612 20.8667 6.744C20.5842 6.58188 20.3709 6.32198 20.2669 6.01334L19.4535 3.57334C19.3641 3.30851 19.1937 3.07849 18.9664 2.91579C18.7391 2.75309 18.4664 2.66595 18.1869 2.66667H12.8535C12.5628 2.65149 12.275 2.7319 12.0343 2.89562C11.7935 3.05934 11.613 3.29736 11.5202 3.57334L10.7735 6.01334C10.6695 6.32198 10.4561 6.58188 10.1737 6.744C9.89119 6.90612 9.55914 6.95924 9.24019 6.89334L6.66685 6.38667C6.40625 6.34984 6.14059 6.39097 5.90332 6.50486C5.66605 6.61875 5.46779 6.80031 5.33352 7.02667L2.66685 11.64C2.52173 11.8809 2.45648 12.1615 2.48043 12.4416C2.50438 12.7218 2.6163 12.9873 2.80019 13.2L4.49352 15.12C4.70728 15.3633 4.82517 15.6761 4.82517 16C4.82517 16.3239 4.70728 16.6367 4.49352 16.88L2.80019 18.8C2.6163 19.0127 2.50438 19.2782 2.48043 19.5584C2.45648 19.8386 2.52173 20.1191 2.66685 20.36L5.33352 24.9733C5.47365 25.2166 5.68701 25.4095 5.94319 25.5244C6.19937 25.6393 6.48529 25.6705 6.76019 25.6133L9.26685 25.1067C9.58581 25.0408 9.91786 25.0939 10.2003 25.256C10.4828 25.4181 10.6962 25.678 10.8002 25.9867L11.6135 28.4267C11.7063 28.7026 11.8868 28.9407 12.1276 29.1044C12.3684 29.2681 12.6561 29.3485 12.9469 29.3333H18.2802C18.5597 29.3341 18.8324 29.2469 19.0597 29.0842C19.287 28.9215 19.4574 28.6915 19.5469 28.4267L20.3602 25.9867C20.4642 25.678 20.6776 25.4181 20.96 25.256C21.2425 25.0939 21.5746 25.0408 21.8935 25.1067L24.4002 25.6133C24.6751 25.6705 24.961 25.6393 25.2172 25.5244C25.4734 25.4095 25.6867 25.2166 25.8269 24.9733L28.4935 20.36C28.6351 20.1164 28.6959 19.8343 28.6671 19.554C28.6384 19.2737 28.5216 19.0098 28.3335 18.8L26.5335 16.88ZM24.5469 18.6667L25.6135 19.8667L23.9069 22.8267L22.3335 22.5067C21.3732 22.3104 20.3743 22.4735 19.5263 22.9651C18.6783 23.4566 18.0404 24.2425 17.7335 25.1733L17.2269 26.6667H13.8135L13.3335 25.1467C13.0267 24.2158 12.3887 23.43 11.5407 22.9384C10.6928 22.4468 9.69381 22.2837 8.73352 22.48L7.16019 22.8L5.42685 19.8533L6.49352 18.6533C7.14946 17.92 7.5121 16.9706 7.5121 15.9867C7.5121 15.0028 7.14946 14.0534 6.49352 13.32L5.42685 12.12L7.13352 9.18667L8.70685 9.50667C9.66715 9.70297 10.6661 9.53984 11.5141 9.04827C12.362 8.55669 13 7.77088 13.3069 6.84L13.8135 5.33334H17.2269L17.7335 6.85334C18.0404 7.78421 18.6783 8.57002 19.5263 9.0616C20.3743 9.55318 21.3732 9.7163 22.3335 9.52L23.9069 9.2L25.6135 12.16L24.5469 13.36C23.8983 14.0917 23.5401 15.0356 23.5401 16.0133C23.5401 16.9911 23.8983 17.935 24.5469 18.6667ZM15.5202 10.6667C14.4654 10.6667 13.4342 10.9795 12.5571 11.5655C11.6801 12.1515 10.9965 12.9845 10.5928 13.959C10.1892 14.9336 10.0835 16.0059 10.2893 17.0405C10.4951 18.075 11.0031 19.0254 11.749 19.7712C12.4948 20.5171 13.4451 21.0251 14.4797 21.2309C15.5143 21.4366 16.5866 21.331 17.5612 20.9274C18.5357 20.5237 19.3687 19.8401 19.9547 18.963C20.5407 18.086 20.8535 17.0548 20.8535 16C20.8535 14.5855 20.2916 13.229 19.2914 12.2288C18.2912 11.2286 16.9347 10.6667 15.5202 10.6667ZM15.5202 18.6667C14.9928 18.6667 14.4772 18.5103 14.0387 18.2173C13.6001 17.9242 13.2583 17.5078 13.0565 17.0205C12.8547 16.5332 12.8019 15.997 12.9048 15.4798C13.0077 14.9625 13.2616 14.4873 13.6346 14.1144C14.0075 13.7414 14.4827 13.4875 14.9999 13.3846C15.5172 13.2817 16.0534 13.3345 16.5407 13.5363C17.0279 13.7382 17.4444 14.08 17.7374 14.5185C18.0305 14.957 18.1869 15.4726 18.1869 16C18.1869 16.7072 17.9059 17.3855 17.4058 17.8856C16.9057 18.3857 16.2274 18.6667 15.5202 18.6667Z"
                                    fill="currentColor" />
                            </svg>
                            <span>Cài đặt</span>
                        </a>
                    </li>
                </ul>

                <div class="sidebar__logout">
                    <button type="button" class="sidebar__link" onclick="openLogoutModal()" style="background: none; border: none; width: 100%; cursor: pointer;">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21.3333 22.6667L28 16M28 16L21.3333 9.33333M28 16H12M12 28H6.66667C5.95942 28 5.28115 27.719 4.78105 27.219C4.28095 26.7189 4 26.0406 4 25.3333V6.66667C4 5.95942 4.28095 5.28115 4.78105 4.78105C5.28115 4.28095 5.95942 4 6.66667 4H12" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <span>Đăng xuất</span>
                    </button>
                </div>
            </aside>

            <!-- Modal Overlay -->
            <div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)" style="display: none;">
                <div class="modal">
                    <div class="icon-wrapper">
                        <svg class="alert-icon" width="33" height="29" viewBox="0 0 33 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 28.5L16.5 0L33 28.5H0ZM16.5 24C16.925 24 17.2815 23.856 17.5695 23.568C17.8575 23.28 18.001 22.924 18 22.5C17.999 22.076 17.855 21.72 17.568 21.432C17.281 21.144 16.925 21 16.5 21C16.075 21 15.719 21.144 15.432 21.432C15.145 21.72 15.001 22.076 15 22.5C14.999 22.924 15.143 23.2805 15.432 23.5695C15.721 23.8585 16.077 24.002 16.5 24ZM15 19.5H18V12H15V19.5Z" fill="#EC1313" />
                        </svg>
                    </div>
                    <h2>Xác nhận đăng xuất</h2>
                    <p>Bạn có chắc chắn muốn đăng xuất khỏi tài khoản không? Phiên làm việc của bạn sẽ kết thúc.</p>
                    <div class="button-group">
                        <button type="button" class="btn-modal btn-cancel" onclick="closeLogoutModal()">Hủy bỏ</button>
                        <button type="button" class="btn-modal btn-confirm" onclick="confirmAction()">Xác nhận</button>
                    </div>
                </div>
            </div>

            <!-- Header -->
            <header class="header">
                <div class="header__logo">
                    <a href="Home.aspx">
                        <img
                            src="../Assets/images/logo-home.png"
                            alt="Event Management Logo"
                            class="header__logo-image" />
                        <span>EventHub</span>
                    </a>
                </div>
                <div class="header__actions">
                    <!-- Nút chuông thông báo -->
                    <div class="header__notification-wrapper">
                        <div class="header__notification" onclick="toggleNotificationDropdown(event)">
                            <svg class="header__notification-icon" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <!-- SVG chuông giữ nguyên của bạn -->
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M17.2106 2.23299C16.5569 3.13264 16.1605 4.19326 16.0639 5.3011C15.9673 6.40893 16.1741 7.52217 16.6621 8.5214C17.1502 9.52062 17.901 10.3681 18.8342 10.973C19.7673 11.5779 20.8475 11.9173 21.9589 11.9548V11.9677C21.9764 12.1987 21.9939 12.4355 22.0173 12.6642C22.2938 15.2857 22.9238 17.0858 23.5293 18.2677C23.9318 19.0552 24.3273 19.5778 24.6073 19.894C24.7302 20.0334 24.8627 20.164 25.0039 20.2848L25.0156 20.2918C25.1653 20.4005 25.2767 20.5538 25.3339 20.7297C25.391 20.9056 25.3909 21.0951 25.3337 21.271C25.2764 21.4469 25.1648 21.6001 25.015 21.7086C24.8652 21.8171 24.6849 21.8754 24.4999 21.875H3.49994C3.31538 21.8748 3.13561 21.8162 2.98634 21.7076C2.83708 21.5991 2.72596 21.4461 2.66888 21.2706C2.61179 21.0951 2.61167 20.906 2.66853 20.7304C2.72539 20.5548 2.83631 20.4017 2.98544 20.293L2.99478 20.2848L3.06944 20.2218C3.13944 20.1588 3.25261 20.0527 3.39261 19.894C3.67261 19.579 4.06811 19.0563 4.47061 18.2688C5.27561 16.695 6.12494 14.035 6.12494 9.79999C6.12494 7.60549 6.94161 5.49033 8.41161 3.92233C9.88394 2.35199 11.8929 1.45833 13.9999 1.45833C14.4464 1.45833 14.887 1.49761 15.3218 1.57616C15.5994 1.62633 16.5094 1.90983 17.2106 2.23299Z" fill="black" />
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M17.7915 5.83333C17.7915 4.67301 18.2525 3.56021 19.073 2.73974C19.8934 1.91926 21.0062 1.45833 22.1665 1.45833C23.3269 1.45833 24.4397 1.91926 25.2601 2.73974C26.0806 3.56021 26.5415 4.67301 26.5415 5.83333C26.5415 6.99365 26.0806 8.10645 25.2601 8.92692C24.4397 9.74739 23.3269 10.2083 22.1665 10.2083C21.0062 10.2083 19.8934 9.74739 19.073 8.92692C18.2525 8.10645 17.7915 6.99365 17.7915 5.83333ZM11.5429 23.7428C11.6423 23.6852 11.7521 23.6477 11.866 23.6326C11.9799 23.6174 12.0957 23.6248 12.2068 23.6544C12.3178 23.684 12.4219 23.7351 12.5132 23.8049C12.6045 23.8748 12.6811 23.9619 12.7387 24.0613C12.8669 24.2822 13.0509 24.4655 13.2723 24.5929C13.4936 24.7203 13.7445 24.7874 13.9999 24.7874C14.2553 24.7874 14.5062 24.7203 14.7275 24.5929C14.9488 24.4655 15.1328 24.2822 15.261 24.0613C15.3187 23.9619 15.3954 23.8748 15.4868 23.805C15.5781 23.7352 15.6823 23.6841 15.7934 23.6546C15.9045 23.6251 16.0203 23.6177 16.1343 23.633C16.2482 23.6482 16.358 23.6857 16.4575 23.7434C16.5569 23.8011 16.644 23.8778 16.7138 23.9691C16.7836 24.0605 16.8347 24.1647 16.8642 24.2758C16.8937 24.3869 16.9011 24.5027 16.8858 24.6166C16.8706 24.7306 16.8331 24.8404 16.7754 24.9398C16.4934 25.4261 16.0886 25.8298 15.6015 26.1105C15.1143 26.3911 14.562 26.5388 13.9999 26.5388C13.4377 26.5388 12.8854 26.3911 12.3983 26.1105C11.9112 25.8298 11.5064 25.4261 11.2244 24.9398C11.1666 24.8403 11.129 24.7304 11.1137 24.6164C11.0984 24.5024 11.1058 24.3865 11.1354 24.2753C11.165 24.1641 11.2162 24.0598 11.2861 23.9685C11.356 23.8771 11.4433 23.8004 11.5429 23.7428Z" fill="black" />
                            </svg>
                            <% if (UnreadCount > 0)
                                { %>
                            <span class="badge badge--danger header__notification-badge"><%= UnreadCount %></span>
                            <% } %>
                        </div>

                        <!-- Dropdown thông báo -->
                        <div class="header__notification-dropdown" id="notificationDropdown">
                            <% if (HeaderNotificationList == null || HeaderNotificationList.Rows.Count == 0)
                                { %>
                            <p class="notification-empty">Không có thông báo mới</p>
                            <% }
                                else
                                { %>
                            <% foreach (System.Data.DataRow row in HeaderNotificationList.Rows)
                                { %>
                            <a href="EventDetail.aspx?id=<%= row["RelatedEventId"] ?? "" %>" class="notification-item <%= Convert.ToBoolean(row["IsRead"]) ? "" : "notification-item--unread" %>">
                                <div class="notification-item__icon notification-item__icon--<%= row["Type"].ToString().ToLower() %>">
                                    <% if (row["Type"].ToString() == "Registration")
                                        { %>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M6 20C5.45 20 4.97933 19.8043 4.588 19.413C4.19667 19.0217 4.00067 18.5507 4 18C3.99934 17.4493 4.19533 16.9787 4.588 16.588C4.98067 16.1973 5.45134 16.0013 6 16C6.54867 15.9987 7.01967 16.1947 7.413 16.588C7.80634 16.9813 8.002 17.452 8 18C7.998 18.548 7.80234 19.019 7.413 19.413C7.02367 19.807 6.55267 20.0027 6 20ZM6 14C5.45 14 4.97933 13.8043 4.588 13.413C4.19667 13.0217 4.00067 12.5507 4 12C3.99934 11.4493 4.19533 10.9787 4.588 10.588C4.98067 10.1973 5.45134 10.0013 6 10C6.54867 9.99867 7.01967 10.1947 7.413 10.588C7.80634 10.9813 8.002 11.452 8 12C7.998 12.548 7.80234 13.019 7.413 13.413C7.02367 13.807 6.55267 14.0027 6 14ZM6 8.00001C5.45 8.00001 4.97933 7.80434 4.588 7.41301C4.19667 7.02167 4.00067 6.55067 4 6.00001C3.99934 5.44934 4.19533 4.97867 4.588 4.58801C4.98067 4.19734 5.45134 4.00134 6 4.00001C6.54867 3.99867 7.01967 4.19467 7.413 4.58801C7.80634 4.98134 8.002 5.45201 8 6.00001C7.998 6.54801 7.80234 7.01901 7.413 7.41301C7.02367 7.80701 6.55267 8.00267 6 8.00001ZM12 8.00001C11.45 8.00001 10.9793 7.80434 10.588 7.41301C10.1967 7.02167 10.0007 6.55067 10 6.00001C9.99934 5.44934 10.1953 4.97867 10.588 4.58801C10.9807 4.19734 11.4513 4.00134 12 4.00001C12.5487 3.99867 13.0197 4.19467 13.413 4.58801C13.8063 4.98134 14.002 5.45201 14 6.00001C13.998 6.54801 13.8023 7.01901 13.413 7.41301C13.0237 7.80701 12.5527 8.00267 12 8.00001ZM18 8.00001C17.45 8.00001 16.9793 7.80434 16.588 7.41301C16.1967 7.02167 16.0007 6.55067 16 6.00001C15.9993 5.44934 16.1953 4.97867 16.588 4.58801C16.9807 4.19734 17.4513 4.00134 18 4.00001C18.5487 3.99867 19.0197 4.19467 19.413 4.58801C19.8063 4.98134 20.002 5.45201 20 6.00001C19.998 6.54801 19.8023 7.01901 19.413 7.41301C19.0237 7.80701 18.5527 8.00267 18 8.00001ZM12 14C11.45 14 10.9793 13.8043 10.588 13.413C10.1967 13.0217 10.0007 12.5507 10 12C9.99934 11.4493 10.1953 10.9787 10.588 10.588C10.9807 10.1973 11.4513 10.0013 12 10C12.5487 9.99867 13.0197 10.1947 13.413 10.588C13.8063 10.9813 14.002 11.452 14 12C13.998 12.548 13.8023 13.019 13.413 13.413C13.0237 13.807 12.5527 14.0027 12 14ZM13 20V16.925L18.525 11.425C18.675 11.275 18.8417 11.1667 19.025 11.1C19.2083 11.0333 19.3917 11 19.575 11C19.775 11 19.9667 11.0377 20.15 11.113C20.3333 11.1883 20.5 11.3007 20.65 11.45L21.575 12.375C21.7083 12.525 21.8127 12.6917 21.888 12.875C21.9633 13.0583 22.0007 13.2417 22 13.425C21.9993 13.6083 21.966 13.796 21.9 13.988C21.834 14.18 21.7257 14.3507 21.575 14.5L16.075 20H13ZM14.5 18.5H15.45L18.475 15.45L18.025 14.975L17.55 14.525L14.5 17.55V18.5ZM18.025 14.975L17.55 14.525L18.475 15.45L18.025 14.975Z" fill="currentColor" />
                                    </svg>
                                    <% }
                                        else if (row["Type"].ToString() == "Event")
                                        { %>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14.5 18C13.8 18 13.2083 17.7583 12.725 17.275C12.2417 16.7917 12 16.2 12 15.5C12 14.8 12.2417 14.2083 12.725 13.725C13.2083 13.2417 13.8 13 14.5 13C15.2 13 15.7917 13.2417 16.275 13.725C16.7583 14.2083 17 14.8 17 15.5C17 16.2 16.7583 16.7917 16.275 17.275C15.7917 17.7583 15.2 18 14.5 18ZM5 22C4.45 22 3.97933 21.8043 3.588 21.413C3.19667 21.0217 3.00067 20.5507 3 20V6C3 5.45 3.196 4.97934 3.588 4.588C3.98 4.19667 4.45067 4.00067 5 4H6V3C6 2.71667 6.096 2.47934 6.288 2.288C6.48 2.09667 6.71733 2.00067 7 2C7.28267 1.99934 7.52033 2.09534 7.713 2.288C7.90567 2.48067 8.00133 2.718 8 3V4H16V3C16 2.71667 16.096 2.47934 16.288 2.288C16.48 2.09667 16.7173 2.00067 17 2C17.2827 1.99934 17.5203 2.09534 17.713 2.288C17.9057 2.48067 18.0013 2.718 18 3V4H19C19.55 4 20.021 4.196 20.413 4.588C20.805 4.98 21.0007 5.45067 21 6V20C21 20.55 20.8043 21.021 20.413 21.413C20.0217 21.805 19.5507 22.0007 19 22H5ZM5 20H19V10H5V20ZM5 8H19V6H5V8Z" fill="currentColor" />
                                    </svg>
                                    <% }
                                        else
                                        { %>
                                    <!-- System -->
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19.8999 12.66C19.7396 12.4775 19.6512 12.2429 19.6512 12C19.6512 11.7571 19.7396 11.5225 19.8999 11.34L21.1799 9.9C21.3209 9.74267 21.4085 9.54471 21.4301 9.33451C21.4516 9.12431 21.4061 8.91269 21.2999 8.73L19.2999 5.27C19.1948 5.08752 19.0348 4.94288 18.8426 4.85669C18.6505 4.7705 18.4361 4.74716 18.2299 4.79L16.3499 5.17C16.1107 5.21943 15.8616 5.17959 15.6498 5.058C15.4379 4.93641 15.2779 4.74149 15.1999 4.51L14.5899 2.68C14.5228 2.48138 14.395 2.30887 14.2245 2.18684C14.0541 2.06482 13.8495 1.99946 13.6399 2H9.6399C9.42183 1.98862 9.20603 2.04893 9.02546 2.17172C8.84489 2.2945 8.70948 2.47302 8.6399 2.68L8.0799 4.51C8.0019 4.74149 7.84187 4.93641 7.63001 5.058C7.41815 5.17959 7.16911 5.21943 6.9299 5.17L4.9999 4.79C4.80445 4.76238 4.6052 4.79322 4.42724 4.87864C4.24929 4.96406 4.1006 5.10023 3.9999 5.27L1.9999 8.73C1.89106 8.91065 1.84212 9.12109 1.86008 9.33123C1.87804 9.54136 1.96198 9.74044 2.0999 9.9L3.3699 11.34C3.53022 11.5225 3.61863 11.7571 3.61863 12C3.61863 12.2429 3.53022 12.4775 3.3699 12.66L2.0999 14.1C1.96198 14.2596 1.87804 14.4586 1.86008 14.6688C1.84212 14.8789 1.89106 15.0894 1.9999 15.27L3.9999 18.73C4.10499 18.9125 4.26502 19.0571 4.45715 19.1433C4.64928 19.2295 4.86372 19.2528 5.0699 19.21L6.9499 18.83C7.18911 18.7806 7.43815 18.8204 7.65001 18.942C7.86187 19.0636 8.0219 19.2585 8.0999 19.49L8.7099 21.32C8.77948 21.527 8.91489 21.7055 9.09546 21.8283C9.27603 21.9511 9.49183 22.0114 9.7099 22H13.7099C13.9195 22.0005 14.1241 21.9352 14.2945 21.8132C14.465 21.6911 14.5928 21.5186 14.6599 21.32L15.2699 19.49C15.3479 19.2585 15.5079 19.0636 15.7198 18.942C15.9316 18.8204 16.1807 18.7806 16.4199 18.83L18.2999 19.21C18.5061 19.2528 18.7205 19.2295 18.9126 19.1433C19.1048 19.0571 19.2648 18.9125 19.3699 18.73L21.3699 15.27C21.4761 15.0873 21.5216 14.8757 21.5001 14.6655C21.4785 14.4553 21.3909 14.2573 21.2499 14.1L19.8999 12.66ZM18.4099 14L19.2099 14.9L17.9299 17.12L16.7499 16.88C16.0297 16.7328 15.2805 16.8551 14.6445 17.2238C14.0085 17.5925 13.53 18.1818 13.2999 18.88L12.9199 20H10.3599L9.9999 18.86C9.76975 18.1618 9.29128 17.5725 8.6553 17.2038C8.01932 16.8351 7.27012 16.7128 6.5499 16.86L5.3699 17.1L4.0699 14.89L4.8699 13.99C5.36185 13.44 5.63383 12.7279 5.63383 11.99C5.63383 11.2521 5.36185 10.54 4.8699 9.99L4.0699 9.09L5.3499 6.89L6.5299 7.13C7.25012 7.27722 7.99932 7.15488 8.6353 6.7862C9.27128 6.41752 9.74975 5.82816 9.9799 5.13L10.3599 4H12.9199L13.2999 5.14C13.53 5.83816 14.0085 6.42752 14.6445 6.7962C15.2805 7.16488 16.0297 7.28722 16.7499 7.14L17.9299 6.9L19.2099 9.12L18.4099 10.02C17.9235 10.5688 17.6549 11.2767 17.6549 12.01C17.6549 12.7433 17.9235 13.4512 18.4099 14ZM11.6399 8C10.8488 8 10.0754 8.2346 9.41761 8.67412C8.75982 9.11365 8.24713 9.73836 7.94438 10.4693C7.64163 11.2002 7.56241 12.0044 7.71675 12.7804C7.8711 13.5563 8.25206 14.269 8.81147 14.8284C9.37088 15.3878 10.0836 15.7688 10.8595 15.9231C11.6355 16.0775 12.4397 15.9983 13.1706 15.6955C13.9015 15.3928 14.5262 14.8801 14.9658 14.2223C15.4053 13.5645 15.6399 12.7911 15.6399 12C15.6399 10.9391 15.2185 9.92172 14.4683 9.17157C13.7182 8.42143 12.7008 8 11.6399 8ZM11.6399 14C11.2443 14 10.8577 13.8827 10.5288 13.6629C10.1999 13.4432 9.94351 13.1308 9.79214 12.7654C9.64076 12.3999 9.60116 11.9978 9.67833 11.6098C9.7555 11.2219 9.94598 10.8655 10.2257 10.5858C10.5054 10.3061 10.8618 10.1156 11.2497 10.0384C11.6377 9.96126 12.0398 10.0009 12.4053 10.1522C12.7707 10.3036 13.0831 10.56 13.3028 10.8889C13.5226 11.2178 13.6399 11.6044 13.6399 12C13.6399 12.5304 13.4292 13.0391 13.0541 13.4142C12.679 13.7893 12.1703 14 11.6399 14Z" fill="currentColor" />
                                    </svg>
                                    <% } %>
                                </div>
                                <div class="notification-item__content">
                                    <h4><%= row["Title"] %></h4>
                                    <p><%= row["Message"] %></p>
                                    <time><%= GetRelativeTime(Convert.ToDateTime(row["CreatedAt"])) %></time>
                                </div>
                            </a>
                            <% } %>
                            <a href="Notification.aspx" class="notification-view-all">Xem tất cả thông báo →</a>
                            <% } %>
                        </div>
                    </div>

                    <!-- Nút avatar -->
                    <img class="header__avatar" src="<%= UserAvatar %>" alt="Avatar" onclick="toggleAvatarMenu(event)" />

                    <!-- Menu avatar (mobile only) -->
                    <div class="header__avatar-menu" id="avatarMenu">
                        <a href="Setting.aspx">Cài đặt</a>
                        <hr />
                        <button type="submit" name="btnAction" value="logout" class="avatar-menu__logout">Đăng xuất</button>
                    </div>
                </div>
            </header>

            <!-- Main -->
            <main class="main">
                <h1 class="main__title">Chi tiết sự kiện</h1>
                <a href="javascript:history.back()" class="btn--back__mobile">
                    <svg class="btn--back__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.25 11.25H20.25C20.4489 11.25 20.6397 11.329 20.7803 11.4697C20.921 11.6103 21 11.8011 21 12C21 12.1989 20.921 12.3897 20.7803 12.5303C20.6397 12.671 20.4489 12.75 20.25 12.75H5.25C5.05109 12.75 4.86032 12.671 4.71967 12.5303C4.57902 12.3897 4.5 12.1989 4.5 12C4.5 11.8011 4.57902 11.6103 4.71967 11.4697C4.86032 11.329 5.05109 11.25 5.25 11.25Z" fill="currentColor" />
                        <path d="M5.56086 12L11.7814 18.219C11.9222 18.3598 12.0013 18.5508 12.0013 18.75C12.0013 18.9491 11.9222 19.1401 11.7814 19.281C11.6405 19.4218 11.4495 19.5009 11.2504 19.5009C11.0512 19.5009 10.8602 19.4218 10.7194 19.281L3.96936 12.531C3.89952 12.4613 3.84411 12.3785 3.8063 12.2874C3.76849 12.1963 3.74902 12.0986 3.74902 12C3.74902 11.9013 3.76849 11.8036 3.8063 11.7125C3.84411 11.6214 3.89952 11.5386 3.96936 11.469L10.7194 4.71897C10.8602 4.57814 11.0512 4.49902 11.2504 4.49902C11.4495 4.49902 11.6405 4.57814 11.7814 4.71897C11.9222 4.8598 12.0013 5.05081 12.0013 5.24997C12.0013 5.44913 11.9222 5.64014 11.7814 5.78097L5.56086 12Z" fill="currentColor" />
                    </svg>
                    <span>Quay lại</span>
                </a>

                <% if (EventData != null)
                    { %>
                <!-- Ảnh sự kiện -->
                <img src="<%= GetEventImage(EventData["ImageUrl"]) %>" alt="<%= EventData["Title"] %>" class="main__image">

                <!-- Toàn bộ nội dung chi tiết -->
                <div class="event-detail__content">
                    <h2 class="event-detail__name"><%= EventData["Title"] %></h2>

                    <div class="event-detail__info">
                        <!-- Ngày giờ -->
                        <div class="info-item">
                            <div class="info-icon__block">
                                <svg class="info-item__icon" width="21" height="24" viewBox="0 0 21 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.4167 18.6667C12.6 18.6667 11.9097 18.3847 11.3458 17.8208C10.7819 17.2569 10.5 16.5667 10.5 15.75C10.5 14.9333 10.7819 14.2431 11.3458 13.6792C11.9097 13.1153 12.6 12.8333 13.4167 12.8333C14.2333 12.8333 14.9236 13.1153 15.4875 13.6792C16.0514 14.2431 16.3333 14.9333 16.3333 15.75C16.3333 16.5667 16.0514 17.2569 15.4875 17.8208C14.9236 18.3847 14.2333 18.6667 13.4167 18.6667ZM2.33333 23.3333C1.69167 23.3333 1.14256 23.1051 0.686 22.6485C0.229444 22.1919 0.000777778 21.6424 0 21V4.66667C0 4.025 0.228667 3.47589 0.686 3.01933C1.14333 2.56278 1.69244 2.33411 2.33333 2.33333H3.5V0H5.83333V2.33333H15.1667V0H17.5V2.33333H18.6667C19.3083 2.33333 19.8578 2.562 20.3152 3.01933C20.7725 3.47667 21.0008 4.02578 21 4.66667V21C21 21.6417 20.7717 22.1912 20.3152 22.6485C19.8586 23.1058 19.3091 23.3341 18.6667 23.3333H2.33333ZM2.33333 21H18.6667V9.33333H2.33333V21ZM2.33333 7H18.6667V4.66667H2.33333V7Z" fill="#3C83F6" />
                                </svg>
                            </div>
                            <div class="info-item__content">
                                <strong class="info-item__label"><%= Convert.ToDateTime(EventData["StartTime"]).ToString("dd 'tháng' MM 'năm' yyyy") %></strong>
                                <span class="info-item__value"><%= Convert.ToDateTime(EventData["StartTime"]).ToString("HH:mm") %> - <%= Convert.ToDateTime(EventData["EndTime"]).ToString("HH:mm") %></span>
                            </div>
                        </div>

                        <!-- Địa điểm -->
                        <div class="info-item">
                            <div class="info-icon__block">
                                <svg class="info-item__icon" width="17" height="24" viewBox="0 0 17 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.16667 11.0833C7.39312 11.0833 6.65125 10.776 6.10427 10.2291C5.55729 9.68208 5.25 8.94022 5.25 8.16667C5.25 7.39312 5.55729 6.65125 6.10427 6.10427C6.65125 5.55729 7.39312 5.25 8.16667 5.25C8.94021 5.25 9.68208 5.55729 10.2291 6.10427C10.776 6.65125 11.0833 7.39312 11.0833 8.16667C11.0833 8.54969 11.0079 8.92896 10.8613 9.28283C10.7147 9.63669 10.4999 9.95822 10.2291 10.2291C9.95822 10.4999 9.63669 10.7147 9.28283 10.8613C8.92896 11.0079 8.54969 11.0833 8.16667 11.0833ZM8.16667 0C6.00073 0 3.92351 0.860414 2.39196 2.39196C0.860414 3.92351 0 6.00073 0 8.16667C0 14.2917 8.16667 23.3333 8.16667 23.3333C8.16667 23.3333 16.3333 14.2917 16.3333 8.16667C16.3333 6.00073 15.4729 3.92351 13.9414 2.39196C12.4098 0.860414 10.3326 0 8.16667 0Z" fill="#3C83F6" />
                                </svg>
                            </div>
                            <div class="info-item__content">
                                <strong class="info-item__label"><%= EventData["Location"] %></strong>
                                <span class="info-item__value"><%= EventData["Location"] ?? "Không có thông tin chi tiết" %></span>
                            </div>
                        </div>

                        <!-- Số chỗ -->
                        <div class="info-item">
                            <div class="info-icon__block">
                                <svg class="info-item__icon" width="27" height="20" viewBox="0 0 27 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <!-- SVG người giữ nguyên -->
                                    <path d="M13.4167 11.6667C15.0278 11.6667 16.4862 11.0133 17.542 9.9575C18.5967 8.90283 19.25 7.4445 19.25 5.83333C19.25 4.22217 18.5967 2.76383 17.542 1.70917C16.4862 0.653334 15.0278 0 13.4167 0C11.8055 0 10.3472 0.653334 9.29133 1.70917C8.23667 2.76383 7.58333 4.22217 7.58333 5.83333C7.58333 7.4445 8.23667 8.90283 9.29133 9.9575C9.83302 10.4994 10.4761 10.9292 11.184 11.2224C11.8918 11.5157 12.6505 11.6667 13.4167 11.6667ZM22.75 12.8333C23.1332 12.8341 23.5129 12.7592 23.8671 12.6129C24.2213 12.4666 24.5431 12.2518 24.8141 11.9808C25.0851 11.7098 25.2999 11.3879 25.4462 11.0337C25.5925 10.6795 25.6674 10.2999 25.6667 9.91667C25.6667 9.11167 25.3412 8.3825 24.8127 7.854C24.5418 7.58318 24.2202 7.36837 23.8663 7.22184C23.5124 7.07531 23.1331 6.99993 22.75 7C22.3668 6.99923 21.9871 7.07415 21.6329 7.22045C21.2787 7.36676 20.9569 7.58157 20.6859 7.85256C20.4149 8.12355 20.2001 8.44538 20.0538 8.7996C19.9075 9.15381 19.8326 9.53343 19.8333 9.91667C19.8327 10.2999 19.9077 10.6794 20.0541 11.0336C20.2005 11.3877 20.4153 11.7095 20.6862 11.9804C20.9572 12.2514 21.279 12.4662 21.6331 12.6126C21.9873 12.7589 22.3668 12.8339 22.75 12.8333ZM22.75 13.5217C21.1972 13.5217 20.0293 13.9953 19.3468 14.651C18.046 13.5812 15.9892 12.8333 13.4167 12.8333C10.773 12.8333 8.75583 13.5893 7.476 14.658C6.78067 13.9988 5.6 13.5217 4.08333 13.5217C1.53067 13.5217 0 14.7933 0 16.0673C0 16.7032 1.53067 17.3413 4.08333 17.3413C4.788 17.3413 5.42033 17.2818 5.97683 17.1862L5.93017 17.5012C5.93017 18.6678 8.73717 19.8345 13.4167 19.8345C17.8057 19.8345 20.9032 18.6678 20.9032 17.5012L20.8798 17.2037C21.42 17.2888 22.0407 17.3413 22.75 17.3413C25.1428 17.3413 26.8333 16.7032 26.8333 16.0673C26.8333 14.7933 25.2315 13.5217 22.75 13.5217ZM4.08333 12.8333C4.88833 12.8333 5.6175 12.5078 6.146 11.9793C6.41682 11.7084 6.63163 11.3869 6.77816 11.0329C6.92469 10.679 7.00007 10.2997 7 9.91667C7.00077 9.53343 6.92585 9.15381 6.77955 8.7996C6.63324 8.44538 6.41843 8.12355 6.14744 7.85256C5.87645 7.58157 5.55462 7.36676 5.2004 7.22045C4.84619 7.045 4.46657 6.99923 4.08333 7C3.70014 6.99939 3.32059 7.07441 2.96645 7.22077C2.6123 7.36712 2.29053 7.58194 2.01957 7.8529C1.74861 8.12386 1.53379 8.44564 1.38743 8.79978C1.24107 9.15392 1.16605 9.53347 1.16667 9.91667C1.1659 10.2999 1.24082 10.6795 1.38712 11.0337C1.53342 11.3879 1.74823 11.7098 2.01922 11.9808C2.29022 12.2518 2.61205 12.4666 2.96626 12.6129C3.32048 12.7592 3.7001 12.8341 4.08333 12.8333Z" fill="#3C83F6" />
                                </svg>
                            </div>
                            <div class="info-item__content">
                                <strong class="info-item__label">Còn <%= AvailableSlots %>/<%= EventData["MaxCapacity"] %> chỗ trống</strong>
                                <span class="info-item__value"><%= RegistrationStatusText %></span>
                            </div>
                        </div>

                        <% if (EventData["RegistrationDeadline"] != DBNull.Value)
                            { %>
                        <div class="info-item">
                            <div class="info-icon__block">
                                <svg class="info-item__icon" width="21" height="28" viewBox="0 0 21 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0 0.583496H21M0 27.4168H21M2.91667 27.4168V20.4168L6.24867 18.4172C7.01147 17.9596 7.64277 17.3122 8.08107 16.5381C8.51938 15.7641 8.74975 14.8897 8.74975 14.0002C8.74975 13.1106 8.51938 12.2362 8.08107 11.4622C7.64277 10.6881 7.01147 10.0408 6.24867 9.58316L2.91667 7.5835V0.583496M18.0833 0.583496V7.5835L14.7513 9.58316C13.9888 10.041 13.3578 10.6884 12.9197 11.4625C12.4816 12.2365 12.2514 13.1108 12.2514 14.0002C12.2514 14.8896 12.4816 15.7638 12.9197 16.5379C13.3578 17.3119 13.9888 17.9593 14.7513 18.4172L18.0833 20.4168V27.4168" stroke="#3C83F6" stroke-width="2" />
                                </svg>
                            </div>
                            <div class="info-item__content">
                                <strong class="info-item__label">Hạn đăng ký: <%= Convert.ToDateTime(EventData["RegistrationDeadline"]).ToString("dd/MM") %></strong>
                                <span class="info-item__value">Hạn đăng ký</span>
                            </div>
                        </div>
                        <% } %>
                    </div>

                    <h3 class="event-detail__description-title">Giới thiệu sự kiện</h3>
                    <div class="event-detail__description">
                        <%= string.IsNullOrEmpty(EventData["Description"]?.ToString()) ? "<p>Chưa có mô tả cho sự kiện này.</p>" : EventData["Description"].ToString().Replace("\n", "<br/>") %>
                    </div>

                    <div class="event-detail__actions">
                        <a href="javascript:history.back()" class="btn--back">
                            <svg class="btn--back__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.25 11.25H20.25C20.4489 11.25 20.6397 11.329 20.7803 11.4697C20.921 11.6103 21 11.8011 21 12C21 12.1989 20.921 12.3897 20.7803 12.5303C20.6397 12.671 20.4489 12.75 20.25 12.75H5.25C5.05109 12.75 4.86032 12.671 4.71967 12.5303C4.57902 12.3897 4.5 12.1989 4.5 12C4.5 11.8011 4.57902 11.6103 4.71967 11.4697C4.86032 11.329 5.05109 11.25 5.25 11.25Z" fill="currentColor" />
                                <path d="M5.56086 12L11.7814 18.219C11.9222 18.3598 12.0013 18.5508 12.0013 18.75C12.0013 18.9491 11.9222 19.1401 11.7814 19.281C11.6405 19.4218 11.4495 19.5009 11.2504 19.5009C11.0512 19.5009 10.8602 19.4218 10.7194 19.281L3.96936 12.531C3.89952 12.4613 3.84411 12.3785 3.8063 12.2874C3.76849 12.1963 3.74902 12.0986 3.74902 12C3.74902 11.9013 3.76849 11.8036 3.8063 11.7125C3.84411 11.6214 3.89952 11.5386 3.96936 11.469L10.7194 4.71897C10.8602 4.57814 11.0512 4.49902 11.2504 4.49902C11.4495 4.49902 11.6405 4.57814 11.7814 4.71897C11.9222 4.8598 12.0013 5.05081 12.0013 5.24997C12.0013 5.44913 11.9222 5.64014 11.7814 5.78097L5.56086 12Z" fill="currentColor" />
                            </svg>
                            <span>Quay lại</span>
                        </a>

                        <% if (IsRegistered)
                            { %>
                        <button type="button" class="btn btn--danger" onclick="openEventModal('cancel')">Hủy đăng ký</button>
                        <% }
                            else if (IsFull)
                            { %>
                        <button type="button" class="btn btn--disabled" disabled>Đã đầy</button>
                        <% }
                            else if (IsPastDeadline)
                            { %>
                        <button type="button" class="btn btn--disabled" disabled>Hết hạn đăng ký</button>
                        <% }
                            else
                            { %>
                        <button type="button" class="btn btn--primary" onclick="openEventModal('register')">Đăng ký ngay</button>
                        <% } %>
                    </div>
                </div>
                <% }
                    else
                    { %>
                <!-- Không tìm thấy sự kiện -->
                <div class="no-events">
                    <div class="no-events__content">
                        <svg class="no-events__icon" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- SVG no events (giữ nguyên hoặc thêm nếu cần) -->
                            <path d="M60 80L52 88C51.0833 88.9167 49.9167 89.375 48.5 89.375C47.0833 89.375 45.9167 88.9167 45 88C44.0833 87.0833 43.625 85.9167 43.625 84.5C43.625 83.0833 44.0833 81.9167 45 81L53 73L45 65C44.0833 64.0833 43.625 62.9167 43.625 61.5C43.625 60.0833 44.0833 58.9167 45 58C45.9167 57.0833 47.0833 56.625 48.5 56.625C49.9167 56.625 51.0833 57.0833 52 58L60 66L68 58C68.9167 57.0833 70.0833 56.625 71.5 56.625C72.9167 56.625 74.0833 57.0833 75 58C75.9167 58.9167 76.375 60.0833 76.375 61.5C76.375 62.9167 75.9167 64.0833 75 65L67 73L75 81C75.9167 81.9167 76.375 83.0833 76.375 84.5C76.375 85.9167 75.9167 87.0833 75 88C74.0833 88.9167 72.9167 89.375 71.5 89.375C70.0833 89.375 68.9167 88.9167 68 88L60 80ZM25 108C22.25 108 19.8967 107.022 17.94 105.065C15.9833 103.108 15.0033 100.753 15 98V28C15 25.25 15.98 22.8967 17.94 20.94C19.9 18.9833 22.2533 18.0033 25 18H30V13C30 11.5834 30.48 10.3967 31.44 9.44002C32.4 8.48335 33.5867 8.00335 35 8.00002C36.4133 7.99668 37.6017 8.47668 38.565 9.44002C39.5283 10.4034 40.0067 11.59 40 13V18H80V13C80 11.5834 80.48 10.3967 81.44 9.44002C82.4 8.48335 83.5867 8.00335 85 8.00002C86.4133 7.99668 87.6017 8.47668 88.565 9.44002C89.5283 10.4034 90.0067 11.59 90 13V18H95C97.75 18 100.105 18.98 102.065 20.94C104.025 22.9 105.003 25.2533 105 28V98C105 100.75 104.022 103.105 102.065 105.065C100.108 107.025 97.7533 108.003 95 108H25ZM25 98H95V48H25V98ZM25 38H95V28H25V38Z" fill="#896161" />
                        </svg>
                        <h3 class="no-events__title">Không tìm thấy sự kiện</h3>
                        <p class="no-events__desc">Sự kiện bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.</p>
                        <a href="Event.aspx" class="btn btn--primary">Quay lại danh sách sự kiện</a>
                    </div>
                </div>
                <% } %>
            </main>

            <!-- Nav Mobile -->
            <nav class="nav">
                <ul class="nav__mobile">
                    <li class="nav__item">
                        <a href="Home.aspx" class="nav__link ">
                            <svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.625 19.75H8.8125V14.75C8.8125 14.4667 8.9145 14.2293 9.1185 14.038C9.3225 13.8467 9.57467 13.7507 9.875 13.75H14.125C14.426 13.75 14.6786 13.846 14.8826 14.038C15.0866 14.23 15.1882 14.4673 15.1875 14.75V19.75H18.375V10.75L12 6.25L5.625 10.75V19.75ZM3.5 19.75V10.75C3.5 10.4333 3.57544 10.1333 3.72631 9.85C3.87719 9.56667 4.08508 9.33333 4.35 9.15L10.725 4.65C11.0969 4.38333 11.5219 4.25 12 4.25C12.4781 4.25 12.9031 4.38333 13.275 4.65L19.65 9.15C19.9156 9.33333 20.1239 9.56667 20.2747 9.85C20.4256 10.1333 20.5007 10.4333 20.5 10.75V19.75C20.5 20.3 20.2917 20.771 19.8752 21.163C19.4587 21.555 18.9587 21.7507 18.375 21.75H14.125C13.824 21.75 13.5718 21.654 13.3685 21.462C13.1652 21.27 13.0632 21.0327 13.0625 20.75V15.75H10.9375V20.75C10.9375 21.0333 10.8355 21.271 10.6315 21.463C10.4275 21.655 10.1753 21.7507 9.875 21.75H5.625C5.04062 21.75 4.54054 21.5543 4.12475 21.163C3.70896 20.7717 3.50071 20.3007 3.5 19.75Z" fill="currentColor" />
                            </svg>
                            <span>Trang chủ</span>
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="Event.aspx" class="nav__link ">
                            <svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14.3611 18.6668C13.7 18.6668 13.1412 18.4385 12.6847 17.9821C12.2282 17.5256 12 16.9668 12 16.3057C12 15.6446 12.2282 15.0858 12.6847 14.6293C13.1412 14.1728 13.7 13.9446 14.3611 13.9446C15.0222 13.9446 15.581 14.1728 16.0375 14.6293C16.494 15.0858 16.7222 15.6446 16.7222 16.3057C16.7222 16.9668 16.494 17.5256 16.0375 17.9821C15.581 18.4385 15.0222 18.6668 14.3611 18.6668ZM5.38889 22.4446C4.86944 22.4446 4.42493 22.2598 4.05533 21.8902C3.68574 21.5206 3.50063 21.0757 3.5 20.5557V7.33345C3.5 6.814 3.68511 6.36948 4.05533 5.99989C4.42556 5.6303 4.87007 5.44519 5.38889 5.44456H6.33333V4.50011C6.33333 4.23252 6.424 4.00837 6.60533 3.82767C6.78667 3.64696 7.01081 3.5563 7.27778 3.55567C7.54474 3.55504 7.7692 3.6457 7.95117 3.82767C8.13313 4.00963 8.22348 4.23378 8.22222 4.50011V5.44456H15.7778V4.50011C15.7778 4.23252 15.8684 4.00837 16.0498 3.82767C16.2311 3.64696 16.4553 3.5563 16.7222 3.55567C16.9892 3.55504 17.2136 3.6457 17.3956 3.82767C17.5776 4.00963 17.6679 4.23378 17.6667 4.50011V5.44456H18.6111C19.1306 5.44456 19.5754 5.62967 19.9456 5.99989C20.3158 6.37011 20.5006 6.81463 20.5 7.33345V20.5557C20.5 21.0751 20.3152 21.5199 19.9456 21.8902C19.576 22.2604 19.1312 22.4452 18.6111 22.4446H5.38889ZM5.38889 20.5557H18.6111V11.1112H5.38889V20.5557ZM5.38889 9.22233H18.6111V7.33345H5.38889V9.22233Z" fill="currentColor" />
                            </svg>
                            <span>Sự kiện</span>
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="MyEvent.aspx" class="nav__link nav__link--active">
                            <svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.0083 18.715L7.65556 15.52L9.025 14.215L11.0083 16.105L14.975 12.325L16.3444 13.63L11.0083 18.715ZM5.38889 22C4.86944 22 4.42493 21.8239 4.05533 21.4717C3.68574 21.1195 3.50063 20.6956 3.5 20.2V7.6C3.5 7.105 3.68511 6.6814 4.05533 6.3292C4.42556 5.977 4.87007 5.8006 5.38889 5.8H6.33333V4H8.22222V5.8H15.7778V4H17.6667V5.8H18.6111C19.1306 5.8 19.5754 5.9764 19.9456 6.3292C20.3158 6.682 20.5006 7.1056 20.5 7.6V20.2C20.5 20.695 20.3152 21.1189 19.9456 21.4717C19.576 21.8245 19.1312 22.0006 18.6111 22H5.38889ZM5.38889 20.2H18.6111V11.2H5.38889V20.2ZM5.38889 9.4H18.6111V7.6H5.38889V9.4Z" fill="currentColor" />
                            </svg>
                            <span>Của tôi</span>
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="Notification.aspx" class="nav__link">
                            <svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5649 22.8437L12.5535 22.8456L12.4859 22.8789L12.4669 22.8827L12.4536 22.8789L12.3861 22.8446C12.3759 22.8421 12.3683 22.844 12.3633 22.8503L12.3595 22.8598L12.3433 23.2668L12.348 23.2859L12.3576 23.2982L12.4565 23.3686L12.4707 23.3724L12.4821 23.3686L12.581 23.2982L12.5925 23.283L12.5963 23.2668L12.5801 22.8608C12.5776 22.8506 12.5725 22.8449 12.5649 22.8437ZM12.8159 22.7362L12.8026 22.7381L12.6276 22.8265L12.6181 22.8361L12.6153 22.8465L12.6324 23.2554L12.6371 23.2668L12.6448 23.2745L12.8359 23.3619C12.8479 23.3651 12.8571 23.3626 12.8635 23.3543L12.8673 23.341L12.835 22.7571C12.8318 22.7451 12.8254 22.7381 12.8159 22.7362ZM12.136 22.7381C12.1318 22.7356 12.1268 22.7347 12.122 22.7358C12.1172 22.7369 12.113 22.7397 12.1103 22.7438L12.1046 22.7571L12.0723 23.341C12.0729 23.3524 12.0783 23.36 12.0884 23.3638L12.1027 23.3619L12.2938 23.2735L12.3034 23.2659L12.3062 23.2554L12.3233 22.8465L12.3205 22.8351L12.311 22.8256L12.136 22.7381Z" fill="#64748B" />
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.34315 9.28429C5.34315 7.51878 6.0445 5.82559 7.2929 4.57719C8.5413 3.32879 10.2345 2.62744 12 2.62744C13.7655 2.62744 15.4587 3.32879 16.7071 4.57719C17.9555 5.82559 18.6568 7.51878 18.6568 9.28429V12.8638L20.3895 16.3291C20.4693 16.4886 20.507 16.6659 20.4989 16.844C20.4909 17.0222 20.4375 17.1953 20.3437 17.347C20.25 17.4987 20.119 17.6239 19.9632 17.7107C19.8075 17.7976 19.6321 17.8431 19.4538 17.8431H15.6841C15.4726 18.6593 14.996 19.3821 14.3292 19.8981C13.6624 20.4141 12.8431 20.6941 12 20.6941C11.1569 20.6941 10.3376 20.4141 9.6708 19.8981C9.00401 19.3821 8.52744 18.6593 8.31591 17.8431H4.54623C4.3679 17.8431 4.19253 17.7976 4.03676 17.7107C3.881 17.6239 3.75001 17.4987 3.65625 17.347C3.56249 17.1953 3.50907 17.0222 3.50106 16.844C3.49304 16.6659 3.53071 16.4886 3.61047 16.3291L5.34315 12.8638V9.28429ZM10.3529 17.8431C10.5198 18.1322 10.7599 18.3723 11.0491 18.5392C11.3382 18.7061 11.6662 18.794 12 18.794C12.3338 18.794 12.6618 18.7061 12.9509 18.5392C13.2401 18.3723 13.4802 18.1322 13.6471 17.8431H10.3529ZM12 4.5294C10.7389 4.5294 9.5295 5.03036 8.63778 5.92207C7.74607 6.81379 7.24511 8.02321 7.24511 9.28429V12.8638C7.24509 13.1589 7.17639 13.45 7.04445 13.7139L5.93181 15.9411H18.0691L16.9565 13.7139C16.8242 13.45 16.7552 13.159 16.7549 12.8638V9.28429C16.7549 8.02321 16.2539 6.81379 15.3622 5.92207C14.4705 5.03036 13.2611 4.5294 12 4.5294Z" fill="currentColor" />
                            </svg>
                            <span>Thông báo</span>
                        </a>
                    </li>
                </ul>
            </nav>


        </div>
    </form>
    <script type="text/javascript">
        // 1. Hàm mở Modal
        function openLogoutModal() {
            const modal = document.getElementById('modalOverlay');
            modal.style.display = 'flex';
        }

        // 2. Hàm đóng Modal
        function closeLogoutModal() {
            const modal = document.getElementById('modalOverlay');
            modal.style.display = 'none';
        }

        // 3. Hàm XÁC NHẬN ĐĂNG XUẤT 
        function confirmAction() {
            // Tạo một input ẩn tạm thời để gửi giá trị btnAction=logout lên Server
            const form = document.getElementById('form1');
            const old = form.querySelector('input[name="btnAction"]');
            if (old) old.remove();
            const hiddenField = document.createElement('input');
            hiddenField.type = 'hidden';
            hiddenField.name = 'btnAction';
            hiddenField.value = 'logout';

            form.appendChild(hiddenField);
            form.submit(); // Gửi form đi
        }

        // 4. Đóng khi click ra ngoài vùng trắng
        function closeModalOnOverlay(event) {
            if (event.target.id === 'modalOverlay') {
                closeLogoutModal();
            }
        }

        function toggleNotificationDropdown(e) {
            e.stopPropagation();
            document.getElementById('notificationDropdown').classList.toggle('show');
            document.getElementById('avatarMenu').classList.remove('show');
        }

        function toggleAvatarMenu(e) {
            if (window.innerWidth <= 768) {
                e.stopPropagation();
                document.getElementById('avatarMenu').classList.toggle('show');
                document.getElementById('notificationDropdown').classList.remove('show');
            }
        }

        // Đóng dropdown khi click bên ngoài
        document.addEventListener('click', function () {
            document.getElementById('notificationDropdown').classList.remove('show');
            document.getElementById('avatarMenu').classList.remove('show');
        });

        let currentEventAction = ''; // 'register' hoặc 'cancel'

        function openEventModal(action) {
            currentEventAction = action;
            const modal = document.getElementById('eventModalOverlay');
            const title = document.getElementById('eventModalTitle');
            const desc = document.getElementById('eventModalDesc');
            const iconWrapper = document.getElementById('eventModalIcon');
            const reasonGroup = document.getElementById('cancelReasonGroup');
            const noteGroup = document.getElementById('registerNoteGroup');
            const confirmBtn = document.getElementById('eventModalConfirmBtn');

            // RESET textarea trước khi mở modal
            document.getElementById('cancelReason').value = '';
            document.getElementById('registerNote').value = '';

            // Re-enable nút confirm
            confirmBtn.disabled = false;

            if (action === 'register') {
                title.textContent = 'Xác nhận đăng ký?';
                desc.textContent = 'Bạn có chắc chắn muốn đăng ký tham gia sự kiện này không?';
                iconWrapper.className = 'modal-overlay__icon-wrapper modal-overlay__icon-wrapper--success';
                confirmBtn.textContent = 'Đăng ký ngay';
                confirmBtn.className = 'modal-overlay__button modal-overlay__button--confirm';

                iconWrapper.innerHTML = `
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_79_1017)">
            <path d="M26.5494 14.55C26.8226 14.2671 26.9738 13.8882 26.9704 13.4949C26.967 13.1016 26.8092 12.7254 26.5311 12.4473C26.253 12.1692 25.8768 12.0114 25.4835 12.008C25.0902 12.0046 24.7113 12.1558 24.4284 12.429L16.4784 20.379L11.5284 15.429C11.2455 15.1558 10.8666 15.0046 10.4733 15.008C10.08 15.0114 9.70378 15.1692 9.42567 15.4473C9.14756 15.7254 8.9898 16.1016 8.98638 16.4949C8.98297 16.8882 9.13416 17.2671 9.4074 17.55L15.4074 23.55C15.6887 23.8312 16.0701 23.9892 16.4679 23.9892C16.8656 23.9892 17.2471 23.8312 17.5284 23.55L26.5284 14.55H26.5494Z" fill="#16A34A"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M36 18C36 27.93 27.93 36 18 36C8.07 36 0 27.93 0 18C0 8.07 8.07 0 18 0C27.93 0 36 8.07 36 18ZM33 18C33 26.28 26.28 33 18 33C9.72 33 3 26.28 3 18C3 9.72 9.72 3 18 3C26.28 3 33 9.72 33 18Z" fill="#16A34A"/>
            </g>
            </svg>
        `;
                reasonGroup.style.display = 'none';
                noteGroup.style.display = 'flex';
            } else if (action === 'cancel') {
                title.textContent = 'Hủy đăng ký?';
                desc.textContent = 'Bạn có chắc chắn muốn hủy đăng ký sự kiện này không? Thao tác này không thể hoàn tác.';
                confirmBtn.textContent = 'Xác nhận hủy';
                confirmBtn.className = 'modal-overlay__button modal-overlay__button--danger';

                iconWrapper.innerHTML = `
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 3C9.72 3 3 9.72 3 18C3 26.28 9.72 33 18 33C26.28 33 33 26.28 33 18C33 9.72 26.28 3 18 3ZM18 19.5C17.175 19.5 16.5 18.825 16.5 18V12C16.5 11.175 17.175 10.5 18 10.5C18.825 10.5 19.5 11.175 19.5 12V18C19.5 18.825 18.825 19.5 18 19.5ZM19.5 25.5H16.5V22.5H19.5V25.5Z" fill="#EC1313"/>
            </svg>
        `;

                reasonGroup.style.display = 'flex';
                noteGroup.style.display = 'none';
            }

            modal.style.display = 'flex';
        }

        function closeEventModal() {
            const modal = document.getElementById('eventModalOverlay');
            modal.style.display = 'none';

            // RESET các textarea về rỗng
            document.getElementById('cancelReason').value = '';
            document.getElementById('registerNote').value = '';

            // Re-enable nút confirm (nếu bị disable)
            const confirmBtn = document.getElementById('eventModalConfirmBtn');
            confirmBtn.disabled = false;
        }

        function closeEventModalOnOverlay(event) {
            if (event.target.id === 'eventModalOverlay') {
                closeEventModal();
            }
        }

        function confirmEventAction() {
            const form = document.getElementById('form1');
            const confirmBtn = document.getElementById('eventModalConfirmBtn');

            if (confirmBtn.getAttribute('data-submitting') === 'true') return;
            confirmBtn.setAttribute('data-submitting', 'true'); // Cờ đánh dấu đang submit
            confirmBtn.disabled = true;
            confirmBtn.textContent = 'Đang xử lý...';

            // Xóa sạch hidden field cũ
            const oldFields = form.querySelectorAll('input[name="btnAction"], input[name="cancelReason"], input[name="note"]');
            oldFields.forEach(el => el.remove());

            // Thêm Action
            const hiddenAction = document.createElement('input');
            hiddenAction.type = 'hidden';
            hiddenAction.name = 'btnAction';
            hiddenAction.value = currentEventAction === 'register' ? 'register' : 'cancelRegistration';
            form.appendChild(hiddenAction);

            // Nếu hủy → thêm lý do
            if (currentEventAction === 'cancel') {
                const reason = document.getElementById('cancelReason').value.trim();
                const reasonField = document.createElement('input');
                reasonField.type = 'hidden';
                reasonField.name = 'cancelReason';
                reasonField.value = reason; // Có thể rỗng
                form.appendChild(reasonField);
            }

            // Nếu đăng ký → thêm note
            if (currentEventAction === 'register') {
                const note = document.getElementById('registerNote').value.trim();
                const noteField = document.createElement('input');
                noteField.type = 'hidden';
                noteField.name = 'note';
                noteField.value = note; // Có thể rỗng
                form.appendChild(noteField);
            }

            form.submit();

        }
    </script>
</body>
</html>
